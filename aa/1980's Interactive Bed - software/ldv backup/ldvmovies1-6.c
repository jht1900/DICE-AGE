/*10/5/87 The interactive movies.*/#include "qDef.h"#include "vdisc.h"/* -------------------- mov1 -------------------------------------------*/static mov1()	{	int		on = -1;	int		n, c;	Byte	*cp;		z(FRAME,0);	z(CHARGEN,1);	z(STOP,0);	z(AUDIO,0);	z(AUDIOSQ,0);			while (! Button())		{		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(STOP,0);				z(CLEARTEXT,0);				continue; 				}			c = 2*n;			if (c > 19) c = 19;			n >>= 1;			switch (n)				{				case 5:					z(STOP,0);					z(AUDIO,0);					cp = "O";					break;				case 4:					z(SLOWFWD,4);					z(AUDIO,3);					cp = "-";					break;				case 3:				case 2:					z(PLAY,0);					z(AUDIO,3);					cp = "]";					break;				case 1:					z(FF,2);					z(AUDIO,3);					cp = "]]";					break;				case 0:					z(FF,4);					z(AUDIO,3);					cp = "]]";					break;				}			zzz( TEXT, 8, 19 - c, cp);			}		}	}/* -------------------- mov2 -------------------------------------------*/#define songStart	1#define songEnd		4101#define repeatPeriod	(30*1)static mov2()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatPos;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos > repeatOut)			{			z(AUDIO,0);			z(SEARCH,repeatPos);			}		MagGrab();		Sumxy();		if (pos > repeatOut)			{			z(SEARCHWAIT,0);			z(PLAY,0);			z(AUDIO,3);			}		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz( TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n >>= 1;			switch (n)				{				case 5:				case 4:				case 0:					repeatOut = 0xFFFF;					z(PLAY,0);					cp = "]";					break;				case 3:				case 2:					repeatPos = pos - repeatPeriod;					repeatOut = pos;					if (repeatPos > pos)						repeatPos = 1;					z(PLAY,0);					cp = "[]";					break;				case 1:					repeatPos = pos - 2*repeatPeriod;					repeatOut = pos;					if (repeatPos > pos)						repeatPos = 1;					z(PLAY,0);					cp = "[]";					break;				}			if (c > 19) c = 19;			zzz( TEXT, 8, 19 - c, cp);			}		}	}	/* -------------------- mov3 -------------------------------------------*/static mov3()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatIn;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos >= repeatOut)			{			z(REW,1);			}		if (pos <= repeatIn)			{			z(PLAY,0);			}		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz(TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n >>= 1;			switch (n)				{				case 5:				case 4:				case 1:				case 0:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(PLAY,0);					cp = "]";					break;				case 3:				case 2:					repeatIn = pos - repeatPeriod;					repeatOut = pos;					if (repeatIn > pos)						repeatIn = 1;					z(PLAY,0);					cp = "[]";					break;				}			if (c > 19) c = 19;			zzz(TEXT, 8, 19 - c, cp);			}		}	}	/* -------------------- mov4 -------------------------------------------*/static mov4()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatIn;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos >= repeatOut)			{			z(REW,1);			}		if (pos <= repeatIn)			{			z(PLAY,0);			}		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz(TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n >>= 1;			switch (n)				{				case 5:				case 0:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(SLOWFWD, 4);					cp = "-";					break;				case 4:				case 1:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(PLAY,0);					cp = "]";					break;				case 3:				case 2:					repeatIn = pos - repeatPeriod;					repeatOut = pos;					if (repeatIn > pos)						repeatIn = 1;					z(PLAY,0);					cp = "[]";					break;				}			if (c > 19) c = 19;			zzz(TEXT, 8, 19 - c, cp);			}		}	}	/* -------------------- mov5 -------------------------------------------*/static mov5()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatIn;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos >= repeatOut)			{			z(REW,1);			}		if (pos <= repeatIn)			{			z(PLAY,0);			}		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz(TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n = (n+1)/2;			switch (n)				{				case 5:				case 0:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(SLOWFWD, 4);					cp = "-";					break;				case 4:				case 1:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(PLAY,0);					cp = "]";					break;				case 3:				case 2:					repeatIn = pos - repeatPeriod;					repeatOut = pos;					if (repeatIn > pos)						repeatIn = 1;					z(PLAY,0);					cp = "[]";					break;				}			if (c > 19) c = 19;			zzz(TEXT, 8, 19 - c, cp);			}		}	}/* -------------------- mov6 -------------------------------------------*/static mov6()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatIn;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos >= repeatOut)			{			z(REW,1);			}		if (pos <= repeatIn)			{			z(PLAY,0);			}		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz(TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n = (n+1)/2;			switch (n)				{				case 5:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(SLOWFWD, 4);					cp = "-";					break;				case 4:				case 3:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(PLAY,0);					cp = "]";					break;				case 2:					repeatIn = pos - repeatPeriod;					repeatOut = pos;					if (repeatIn > pos)						repeatIn = 1;					z(PLAY,0);					cp = "[]";					break;				case 1:					repeatOut = 0xFFFF; repeatIn = 0x0000;					z(REW,1);					cp = "[";					break;				case 0:					repeatOut = 0xFFFF; repeatIn = 0x0000;					z(SLOWREV,2);					cp = "-";					break;				}			if (c > 19) c = 19;			zzz(TEXT, 8, 19 - c, cp);			}		}	}	/* -------------------- mov7 -------------------------------------------*/static mov7()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatIn;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos >= repeatOut)			{			z(REW,1);			}		if (pos <= repeatIn)			{			z(PLAY,0);			}		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz(TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n = (n+1)>>1;			switch (n)				{				case 5:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(SLOWFWD, 4);					cp = "-";					break;				case 4:				case 3:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(PLAY,0);					cp = "]";					break;				case 2:					repeatIn = pos - (repeatPeriod<<1);					repeatOut = pos;					if (repeatIn > pos)						repeatIn = 1;					z(PLAY,0);					cp = "[]";					break;				case 1:					repeatOut = 0xFFFF; repeatIn = 0x0000;					z(REW,1);					cp = "[";					break;				case 0:					repeatOut = 0xFFFF; repeatIn = 0x0000;					z(SLOWREV,2);					cp = "-";					break;				}			if (c > 19) c = 19;			zzz(TEXT, 8, 19 - c, cp);			}		}	}/* -------------------- mov8 -------------------------------------------*/static mov8()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatIn;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos >= repeatOut)			{			z(REW,2);			}		if (pos <= repeatIn)			{			z(PLAY,0);			}		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz(TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n = (n+1)>>1;			switch (n)				{				case 5:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(SLOWFWD, 4);					cp = "-";					break;				case 4:				case 3:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(PLAY,0);					cp = "]";					break;				case 2:					repeatIn = pos - (repeatPeriod<<1);					repeatOut = pos;					if (repeatIn > pos)						repeatIn = 1;					z(PLAY,0);					cp = "[]";					break;				case 1:					repeatOut = 0xFFFF; repeatIn = 0x0000;					z(REW,1);					cp = "[";					break;				case 0:					repeatOut = 0xFFFF; repeatIn = 0x0000;					z(SLOWREV,2);					cp = "-";					break;				}			if (c > 19) c = 19;			zzz(TEXT, 8, 19 - c, cp);			}		}	}/* -------------------- mov9 -------------------------------------------*/static mov9()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatIn;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos >= repeatOut)			{			z(AUDIO,0);			z(REW,3);			}		if (pos <= repeatIn)			{			z(PLAY,0);			z(AUDIO,3);			}		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz(TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n = (n+1)/2;			switch (n)				{				case 5:				case 0:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(SLOWFWD, 4);					z(AUDIO,3);					cp = "-";					break;				case 4:				case 1:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(PLAY,0);					z(AUDIO,3);					cp = "]";					break;				case 3:				case 2:					repeatIn = pos - repeatPeriod;					repeatOut = pos;					if (repeatIn > pos)						repeatIn = 1;					cp = "[]";					z(PLAY,0);					break;				}			if (c > 19) c = 19;			zzz(TEXT, 8, 19 - c, cp);			}		}	}/* -------------------- mova -------------------------------------------*/static mova()	{	int		on = -1;	int		n, c;	Byte	*cp;	unsigned int	repeatOut;	unsigned int	repeatIn;	unsigned int	pos;		z(FRAME,0);	z(CHARGEN,1);	z(VIDEO,0);	z(AUDIO,0);	z(AUDIOSQ,0);	z(SEARCH, songStart);	z(SEARCHWAIT,0);	repeatOut = 0xFFFF;		while (! Button())		{		pos = z(POS,0);		if (pos >= repeatOut)			{			z(AUDIO,0);			z(REW,3);			}		if (pos <= repeatIn)			{			z(PLAY,0);			z(AUDIO,3);			}		MagGrab();		Sumxy();		n = thePick();		if (n != on)			{			if (on < 0) 				{				z(VIDEO,1);				z(AUDIO,3);				}			on = n;			if (n < 0) 				{ 				z(VIDEO,0);				z(AUDIO,0);				z(SEARCH, songStart);				z(SEARCHWAIT, 0);				repeatOut = 0xFFFF;					zzz(TEXT, 8, 1, " ");				continue; 				}			c = 2*n;			n = (n+1)/2;			switch (n)				{				case 5:				case 0:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(SLOWFWD, 4);					z(AUDIO,3);					cp = "-";					break;				case 4:				case 1:					repeatOut = 0xFFFF;					repeatIn = 0x0000;					z(PLAY,0);					z(AUDIO,3);					cp = "]";					break;				case 3:				case 2:					repeatIn = pos - repeatPeriod;					repeatOut = pos;					if (repeatIn > pos)						repeatIn = 1;					cp = "[]";					z(PLAY,0);					break;				}			if (c > 19) c = 19;			zzz(TEXT, 8, 19 - c, cp);			}		}	}/* ---------------------------------------------------------------------- */qIfunc movieFuncs[] ={	{ mov1, "mov1", 0 + qRetInt },	{ mov2, "mov2", 0 + qRetInt },	{ mov3, "mov3", 0 + qRetInt },	{ mov4, "mov4", 0 + qRetInt },	{ mov5, "mov5", 0 + qRetInt },	{ mov6, "mov6", 0 + qRetInt },	{ mov7, "mov7", 0 + qRetInt },	{ mov8, "mov8", 0 + qRetInt },	{ mov9, "mov9", 0 + qRetInt },	{ mova, "mova", 0 + qRetInt },		{ 0, 0, 0 }};/* --------------------------------------------------------------------- */