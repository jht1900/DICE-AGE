/* History:Copyright © 2003 John Henry Thompson. All rights reserved2002.03.12	jht	Created.*/#include "CCapturePane.h"// ---------------------------------------------------------------------------------void	CCapturePane::DrawLayer(char *str, Rect &inRect){	GWorldPtr			gWorld;	PixMapHandle		pixMapHd;	GrafPtr			origPort;	GDHandle		origDev;	Rect				box;    int					wid, hi;    int					hor, vert;	SInt16	yMax;	SInt16	yMin;	Point	numer = { 1, 1 };	Point	denom = { 1, 1 };	short	width;	FontInfo	finfo;    StyleParameter	astyle = outline | extend | bold | shadow;    int		hoff;    int		ran;    	gWorld = gwMonitor8Ptr;			pixMapHd = GetGWorldPixMap(gWorld);	if (! LockPixels(pixMapHd))	{		// !!@ lock failed		return;	}	//box = (**pixMapHd).bounds;	box = inRect;	wid = box.right - box.left;	hi = box.bottom - box.top;		GetGWorld(&origPort, &origDev);	SetGWorld(gWorld, 0);		TextSize( hi );	TextMode( srcBic );	TextFace( astyle );		SetOutlinePreferred( TRUE );	SetPreserveGlyph( TRUE );	GetFontInfo( &finfo );	OutlineMetrics( 1, str, numer, denom, &yMax, &yMin, 0, 0, 0);	width = TextWidth( str, 0, 1 );	#if 0	hoff = (wid - width)/2;	// Center horizontally	#else	hoff = (wid - width);	// Random hor offset	ran = Random();	if (ran < 0) ran = -ran;	hoff = ran % hoff;	#endif	hor = box.left + hoff;	yMax = yMax - yMin;	//vert = box.bottom - (hi - yMax)/2;	vert = box.bottom - finfo.descent;	MoveTo( hor, vert);	MacDrawText( str, 0, 1);		SetGWorld(origPort, origDev); 	UnlockPixels( pixMapHd );	}