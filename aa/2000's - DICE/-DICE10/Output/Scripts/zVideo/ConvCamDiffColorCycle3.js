// Convolve Effect demo	n = 4	ww = 640; wh = 480	w = ww / n; h = wh / n;	// The dimension of the movie, should get from movie file later	img = new Image(w, h);	// Create an image buffer to store frame from movie	mov = new Camera();		// Create a Camera object	mov.output = img;		// Movie will play into image buffer	//mov.pickFile();		// Present a file picker dialog box	img2 = new Image(w, h);		// Create image buffer for the effect	img3 = new Image(w, h);		// Create image buffer for the effect	eff = new ConvolveEffect(); // Effect: The image difference is colorized	eff.input = img2;			// The image from the movie is feed to the effect	eff.output = img3;		eff2 = new DiffTrailColorEffect(); // DiffTrailEffect -- The image difference is left as a trail	eff2.input = img;	eff2.output = img2;		eff2.diffTolerance = 40		color_int = new Color(255,255,255)	// Color to apply to image difference	eff2.color = color_int;	//win = new Window(2, 45, ww, wh);	// Window use to present the result of the Effect	//win.show();	win2 = new Window(2, 45, ww, wh);	// Window use to present the result of the Effect	win2.show();		//proj = new Projector();		// Project simply copies input to output	//proj.input = img;	//proj.output = win;		proj2 = new Projector();		// Project simply copies input to output	proj2.input = img3;	proj2.output = win2;	proj3 = new Projector();		// Project simply copies input to output	proj3.input = img3;	proj3.output = img2;		//mov.pickFile();		// Present a file picker dialog boxfunction setupReportWindow()	{		var w = new Window( 640+80 /*-left-*/, 480 + 80 /*-top-*/, 400 /*-width-*/, 100 /*-height-*/ )		w.ctl1 = new TextField( w, "This is a test ", 5, 10, 380, 22 );		w.ctl1.visible = 1		w.show();		return w;	}	var report_win;	report_win = setupReportWindow();	frameCount = 0;	startTime = GetCurrentEventTime();	lastNow = startTime;function processThem()	{		mov.process();		eff2.process();		eff.process();		//proj.process();		proj2.process();		proj3.process();				stepColorCycle();				issueReport();	}function spendTime()	{		processThem();	}function issueReport()	{		frameCount++;		now2 = GetCurrentEventTime();		lapse = now2 - startTime;		fps = frameCount / lapse ;					if (report_win != undefined && (now2 - lastNow) > 1.0 )		{			lapse = Math.round( lapse * 100 ) / 100;			fps = Math.round( fps * 100 ) / 100;			//report_win.ctl1.title = "Lapse "+lapse+" Frame "+frameCount+" Fps "+fps;			report_win.ctl1.title = " Fps "+fps;			lastNow = now2;		}	}function setupColorCycle()	{		color = new Array();		colorCycleDelta = new Array();		colorCycleCount = 30;		colorCycleIndex = 0;				var i;		for (i = 0; i < 3; i++)		{			colorCycleDelta[i] = 255.0 / colorCycleCount;			color[i] = 0;		}	}	setupColorCycle();	function stepColorCycle()	{		var i;		for (i = 0; i < 3; i++)		{			color[i] += colorCycleDelta[i];		}		colorCycleIndex++;		if (colorCycleIndex >= colorCycleCount)		{			var		color_target;						for (i = 0; i < 3; i++)			{				color_target = Math.random() * 255;				colorCycleDelta[i] = (color_target - color[i]) / colorCycleCount;			}						colorCycleIndex = 0;		}		color_int.red = color[0];		color_int.green = color[1];		color_int.blue = color[2];	}		processThem();		