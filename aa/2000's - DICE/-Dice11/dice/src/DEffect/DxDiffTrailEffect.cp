// --------------------------------------------------------------------------------//// DiffTrailEffect -- gray image difference effect//// 2005.02.27 	jht		Created.//// Copyright (c) 2005 John Henry Thompson. All rights reserved.// --------------------------------------------------------------------------------#include "DxDiffTrailEffect.h"#include "DxImage_js.h"#include "DxImage.h"#include "dicejs.h"// --------------------------------------------------------------------------------DxDiffTrailEffect::DxDiffTrailEffect(void *wrapperObj )	: DxDiffEffect(wrapperObj ){	this->diffTolerance = 40;}#if 0// --------------------------------------------------------------------------------DxDiffTrailEffect::~DxDiffTrailEffect(){}#endif// ---------------------------------------------------------------------------------void	DxDiffTrailEffect::ComputeImage(){	int	capPix;	int diffwPix;	int	diffTolerance_x3;		diffTolerance_x3 = this->diffTolerance * 3;	#define CODE_INNER_LOOP \	/* leave image as trail */ \	capPix = sourceLinePtr[0] + sourceLinePtr[1] + sourceLinePtr[2];   \	diffwPix = (previousLinePtr[0] + previousLinePtr[1] + previousLinePtr[2]) - capPix;  \	if (diffwPix < -diffTolerance_x3 || diffwPix > diffTolerance_x3) \	{ \		/* There is  difference, show image */ \			outputLinePtr[0] = sourceLinePtr[0]; \			outputLinePtr[1] = sourceLinePtr[1]; \			outputLinePtr[2] = sourceLinePtr[2]; \	} \#include "DiffEffectLoop.inc"}// --------------------------------------------------------------------------------// --------------------------------------------------------------------------------